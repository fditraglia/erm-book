<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Lab 01 - Simulation and the Hot Hand</title>
  <meta name="description" content="Lab 01 - Simulation and the Hot Hand" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Lab 01 - Simulation and the Hot Hand" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lab 01 - Simulation and the Hot Hand" />
  
  
  

<meta name="author" content="Frank" />


<meta name="date" content="2022-02-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="rcrash.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/core-erm-logo.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i>About This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-not-stata"><i class="fa fa-check"></i>Why not Stata?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-not-matlab-julia-or-python"><i class="fa fa-check"></i>Why not Matlab, Julia, or Python?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="rcrash.html"><a href="rcrash.html"><i class="fa fa-check"></i><b>1</b> A Crash Course in R Programming</a>
<ul>
<li class="chapter" data-level="1.1" data-path="rcrash.html"><a href="rcrash.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="rcrash.html"><a href="rcrash.html#working-with-r-scripts"><i class="fa fa-check"></i><b>1.2</b> Working with R Scripts</a></li>
<li class="chapter" data-level="1.3" data-path="rcrash.html"><a href="rcrash.html#the-absolute-basics"><i class="fa fa-check"></i><b>1.3</b> The Absolute Basics</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="rcrash.html"><a href="rcrash.html#arithmetic"><i class="fa fa-check"></i><b>1.3.1</b> Arithmetic</a></li>
<li class="chapter" data-level="1.3.2" data-path="rcrash.html"><a href="rcrash.html#exponents-logarithms-and-trigonometry"><i class="fa fa-check"></i><b>1.3.2</b> Exponents, Logarithms, and Trigonometry</a></li>
<li class="chapter" data-level="1.3.3" data-path="rcrash.html"><a href="rcrash.html#logical-comparison"><i class="fa fa-check"></i><b>1.3.3</b> Logical Comparison</a></li>
<li class="chapter" data-level="1.3.4" data-path="rcrash.html"><a href="rcrash.html#strings-text"><i class="fa fa-check"></i><b>1.3.4</b> Strings (text)</a></li>
<li class="chapter" data-level="1.3.5" data-path="rcrash.html"><a href="rcrash.html#variables"><i class="fa fa-check"></i><b>1.3.5</b> Variables</a></li>
<li class="chapter" data-level="1.3.6" data-path="rcrash.html"><a href="rcrash.html#vectors-types"><i class="fa fa-check"></i><b>1.3.6</b> Vectors &amp; Types</a></li>
<li class="chapter" data-level="1.3.7" data-path="rcrash.html"><a href="rcrash.html#vector-arithmetic-and-functions"><i class="fa fa-check"></i><b>1.3.7</b> Vector Arithmetic and Functions</a></li>
<li class="chapter" data-level="1.3.8" data-path="rcrash.html"><a href="rcrash.html#subsetting-vectors"><i class="fa fa-check"></i><b>1.3.8</b> Subsetting Vectors: <code>[</code></a></li>
<li class="chapter" data-level="1.3.9" data-path="rcrash.html"><a href="rcrash.html#named-vectors"><i class="fa fa-check"></i><b>1.3.9</b> Named Vectors</a></li>
<li class="chapter" data-level="1.3.10" data-path="rcrash.html"><a href="rcrash.html#getting-help-documentation"><i class="fa fa-check"></i><b>1.3.10</b> Getting Help: Documentation</a></li>
<li class="chapter" data-level="1.3.11" data-path="rcrash.html"><a href="rcrash.html#lists"><i class="fa fa-check"></i><b>1.3.11</b> Lists</a></li>
<li class="chapter" data-level="1.3.12" data-path="rcrash.html"><a href="rcrash.html#packages"><i class="fa fa-check"></i><b>1.3.12</b> Packages</a></li>
<li class="chapter" data-level="1.3.13" data-path="rcrash.html"><a href="rcrash.html#data.tables"><i class="fa fa-check"></i><b>1.3.13</b> <code>data.table</code>s</a></li>
<li class="chapter" data-level="1.3.14" data-path="rcrash.html"><a href="rcrash.html#subsetting-data"><i class="fa fa-check"></i><b>1.3.14</b> Subsetting data</a></li>
<li class="chapter" data-level="1.3.15" data-path="rcrash.html"><a href="rcrash.html#loading-external-data-data-summary"><i class="fa fa-check"></i><b>1.3.15</b> Loading External Data &amp; Data Summary</a></li>
<li class="chapter" data-level="1.3.16" data-path="rcrash.html"><a href="rcrash.html#more-on-data.table-access"><i class="fa fa-check"></i><b>1.3.16</b> More on <code>data.table</code> Access</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="rcrash.html"><a href="rcrash.html#part-3-exercises"><i class="fa fa-check"></i><b>1.4</b> Part 3: Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="using-webexercises.html"><a href="using-webexercises.html"><i class="fa fa-check"></i><b>2</b> Using <code>webexercises</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="using-webexercises.html"><a href="using-webexercises.html#tally-the-number-of-correct-answers-total_correct"><i class="fa fa-check"></i><b>2.1</b> Tally the number of correct answers: <code>total_correct()</code></a></li>
<li class="chapter" data-level="2.2" data-path="using-webexercises.html"><a href="using-webexercises.html#create-a-truefalse-question-torf"><i class="fa fa-check"></i><b>2.2</b> Create a TRUE/FALSE question: <code>torf()</code></a></li>
<li class="chapter" data-level="2.3" data-path="using-webexercises.html"><a href="using-webexercises.html#create-fill-in-the-blank-questions-fitb"><i class="fa fa-check"></i><b>2.3</b> Create fill-in-the-blank Questions: <code>fitb()</code></a></li>
<li class="chapter" data-level="2.4" data-path="using-webexercises.html"><a href="using-webexercises.html#create-a-multiple-choice-question-mcq-mcqlong"><i class="fa fa-check"></i><b>2.4</b> Create a multiple choice question: <code>mcq(), mcqlong()</code></a></li>
<li class="chapter" data-level="2.5" data-path="using-webexercises.html"><a href="using-webexercises.html#hide-solutions-create-hints"><i class="fa fa-check"></i><b>2.5</b> Hide Solutions / Create Hints</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="using-webexercises.html"><a href="using-webexercises.html#example-1-inline-hint-and-solution"><i class="fa fa-check"></i><b>2.5.1</b> Example 1: Inline Hint and Solution</a></li>
<li class="chapter" data-level="2.5.2" data-path="using-webexercises.html"><a href="using-webexercises.html#example-2-chunk-solution-that-doesnt-execute"><i class="fa fa-check"></i><b>2.5.2</b> Example 2: Chunk solution that doesn't execute</a></li>
<li class="chapter" data-level="2.5.3" data-path="using-webexercises.html"><a href="using-webexercises.html#example-3-chunk-solution-that-evaluates"><i class="fa fa-check"></i><b>2.5.3</b> Example 3: Chunk solution that evaluates</a></li>
<li class="chapter" data-level="2.5.4" data-path="using-webexercises.html"><a href="using-webexercises.html#example-4-show-the-output-hide-the-code"><i class="fa fa-check"></i><b>2.5.4</b> Example 4: Show the output, hide the code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>3</b> Overview</a>
<ul>
<li class="chapter" data-level="3.1" data-path="overview.html"><a href="overview.html#hidden-solutions-and-hints"><i class="fa fa-check"></i><b>3.1</b> Hidden solutions and hints</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="overview.html"><a href="overview.html#example-problem"><i class="fa fa-check"></i><b>3.1.1</b> Example problem</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lab 01 - Simulation and the Hot Hand</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Lab 01 - Simulation and the Hot Hand</h1>
<p class="author"><em>Frank</em></p>
<p class="date"><em>2022-02-20</em></p>
</div>
<div id="preface" class="section level1 unnumbered">
<h1>Preface</h1>
<div id="about-this-book" class="section level2 unnumbered">
<h2>About This Book</h2>
<p>Supervising undergraduate, masters-level, and doctoral research students has shown me just how many of the skills that I take for granted in my day-to-day work were never taught in a course, but acquired through years of painful trial-and-error. You've probably heard that "the only way to learn how to do research is by doing research." Indeed: classroom exercises are always somewhat artificial, and there is no substitute for getting your hands dirty with a problem that really matters to you. But trial-and-error is a slow and clumsy way to gain proficiency, and throwing students in at the deep end is neither a recipe for academic success nor for mental well-being. The goal of this book is to put some structure around the process through which students learn to do empirical work in economics, building a strong foundation for later self-directed reading and research.</p>
<p>The book is divided into twenty-odd short chapters called <em>lessons</em>, each designed to take between one and two hours to complete. Broadly speaking, the material is a mix of applied econometrics, data science, and research skills. In keeping with the Swiss Army Knife logo, the idea is to teach you lots of little things that will come in handy later. While the topics covered below are something of a miscellany, there are strong connections between the lessons. For best results, complete them <em>in order</em>.</p>
<p>A key theme that runs throughout the lessons is the importance of reproducible research using open-source tools. Reproducible research is about creating a clean and fully-documented path from raw data to final results, making errors less likely to occur and easier to find when they do. It also allows other researchers, or our future selves, to build on past work, expanding the sum total of knowledge. Of course I can only replicate your research if I can run your code, and this is why open-source software is so important. Fortunately there are many fantastic open-source programming languages to choose from. This book uses R, the <em>lingua franca</em> of statistics and an increasingly popular choice among economists.</p>
</div>
<div id="pre-requisites" class="section level2 unnumbered">
<h2>Pre-requisites</h2>
<p>This book does not assume advanced knowledge of programming, mathematics, or econometrics, but it does have some pre-requisites. My target audience is first-year graduate students and final-year undergraduates in economics. At Oxford, I use this book to teach a first-year master's level course on <em>Empirical Research Methods</em> that comes after students have completed 16 weeks of basic statistics and econometrics. I assume that you've taken an econometrics course that uses matrix notation and that you have <em>basic familiarity</em> with R programming. If you need to brush up on econometrics, I recommend <a href="https://www.google.co.uk/books/edition/A_Guide_to_Modern_Econometrics/uEFm6pAJZhoC?hl=en&amp;gbpv=1&amp;dq=marno+verbeek+guide+to+modern+econometrics&amp;printsec=frontcover">Marno Verbeek's <em>Guide to Modern Econometrics</em></a>. I've linked to the third edition because it is particularly inexpensive to buy a used copy, but any edition will do. At a more advanced level, Bruce Hansen's <a href="https://ssc.wisc.edu/~bhansen/econometrics/">two volume series <em>Econometrics</em></a> is both excellent and free to download online. If you haven't used R before or feel the need for a bit of review, I suggest reading <a href="https://rstudio-education.github.io/hopr/">Hands-On Programming with R</a>. It's free, short, and will get you up to speed quickly.</p>
</div>
<div id="why-not-stata" class="section level2 unnumbered">
<h2>Why not Stata?</h2>
<p>Given that much of the material discussed below falls under the broad category of "applied microeconometrics" you may wonder why I chose R rather than <a href="https://stata.com">Stata</a>. Indeed, Stata is easy-to-use, and makes it relatively painless to implement "textbook" microeconometric methods.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> So why don't I like Stata? Before beginning my polemic I should be absolutely clear that Stata users are not bad people: hate the sine, love the sinner. Here begins the sermon.</p>
<p>First, Stata is expensive.
The price for a Business single-user Stata license is $765 <em>per year</em>.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
If you want support for multicore computing, the price is even higher: an 8-core version of Stata costs $1,395 annually.
There is no discount for Government or nonprofits, but as an Oxford faculty member, I can obtain an 8-core version of Stata for the low price of $595 per year, or around 9% of my annual research allowance.
In contrast, the tools that we will learn in this book, mainly R and C++, are completely free.
This is particularly important in the modern world of high-performance cluster computing.
If you're considering running your code on a multicore machine on Amazon, Google, or Microsoft cloud servers, you don't want to pay a software license fee for every core that you use.</p>
<p>Second, Stata is almost comically behind the times.
Let's see what's new in Stata version 16, released in February 2020.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
At the top of the list is the LASSO, a wildly popular technique for high-dimensional regression.
Rob Tibshirani developed this method in a seminal paper from 1996, so it only took 24 years for it to be incorporated into Stata.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>
Fortunately, Tibshirani and his co-authors made it easy for Stata, by releasing open-source software to implement the LASSO and related methods in R over a decade ago.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>
Next on the list of new Stata features is linear programming, a technique that came to prominence in the late 1940s.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>
Stata 16 also has the ability to call "any Python package"--something you can do for free in R using <a href="https://github.com/rstudio/reticulate">reticulate</a> or in Python itself for that matter--and "truly reproducible reporting."
Reproducible reporting is incredibly valuable, and it's something that we'll cover in detail below.
It's also been available in R, completely free of charge, since at least 2002.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>
I suppose we shouldn't expect too much of a statistical computing package that only added support for matrix programming in 2005, a full 20 years after Stata version 1.0.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<p>Third, Stata is a black box.
Because the underlying source code is kept secret, there's no way for a Stata user to know for certain what's happening under the hood.
A few years ago I tried to determine precisely what instrument set Stata was using in its implementation of a well-known dynamic panel estimator.
The documentation was vague, so resorted to reverse-engineering the Stata results by trial-and-error in R.
We never did get the results to match perfectly.
In contrast, if you're not sure what a particular R function or package is doing, you can simply read the source code and find out.</p>
<p>Fourth, and most importantly, Stata makes it hard to share with others.
If I don't own a copy of Stata, I can't replicate your work.
Even if I do own a copy of Stata, I still may not be able to so do: Stata's proprietary binary data formats are updated fairly regularly and do not maintain backwards compatibility.
Datafiles created in Stata version 16, for example, cannot be opened in Stata 13.
Indeed, depending on the number of variables included in your dataset, Stata 16 files cannot necessarily be opened even in Stata 15.
Fortunately, as we'll see below, intrepid open-source programmers have developed free software to unlock data from Stata's proprietary and ever-changing binary formats.</p>
</div>
<div id="why-not-matlab-julia-or-python" class="section level2 unnumbered">
<h2>Why not Matlab, Julia, or Python?</h2>
<p>Unlike Stata, Matlab is a <em>bona fide</em> programming language and a fairly capable one at that. Nevertheless, my other critiques of Stata from above still apply: Matlab is extremely expensive, and it's not open source. In contrast, I have nothing bad to say about Python and Julia: they're great languages and you should consider learning one or both of them! A good resources aimed at economists is the <code>quantecon.org</code>: <a href="https://python.quantecon.org/" class="uri">https://python.quantecon.org/</a> and <a href="https://julia.quantecon.org/" class="uri">https://julia.quantecon.org/</a>. In the end I decided to choose <em>one language</em> and R struck me as the best choice <em>for the moment</em>. In five or ten years time, I could easily imagine re-writing this book in Julia, but as of this writing R has the advantage of maturity and a large, and generally extremely supportive community of users. Even if you ultimately decide that R isn't for you, fear not! After learning the material in this book, you'll find it fairly easy to transition to Python or Julia, should you so choose.</p>
<p><strong>Now let's get started!</strong></p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Arguably, Stata is <em>too easy to learn</em> precisely because of the incentives faced by a software developer with monopoly power: see Hal Varian's paper: <a href="https://people.ischool.berkeley.edu/~hal/Papers/Software.pdf">Economic Incentives in Software Design</a>. Monopolist may make software <em>too easy</em> to learn.<a href="index.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>These figures were accurate as of March 2021. For the latest prices, see <a href="https://www.stata.com/order/dl/" class="uri">https://www.stata.com/order/dl/</a>.<a href="index.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><a href="https://www.stata.com/new-in-stata/" class="uri">https://www.stata.com/new-in-stata/</a><a href="index.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="https://rss.onlinelibrary.wiley.com/doi/pdfdirect/10.1111/j.2517-6161.1996.tb02080.x">Tibshirani (1996) - Regression Shrinkage and Selection via the Lasso</a><a href="index.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="https://www.jstatsoft.org/article/view/v033i01">Friedman et al (2010) - Regularization Paths for Generalized Linear Models via Coordinate Descent</a><a href="index.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>For a history of linear programming, see <a href="https://link.springer.com/content/pdf/10.1007/978-3-642-68874-4_4.pdf">Dantzig (1983)</a>. To be completely fair, the linear programming <a href="https://www.stata.com/new-in-stata/linear-programming/">algorithm</a>
implemented in Stata 16 was only developed in 1992, a lag of merely 28 years.<a href="index.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Reproducible reporting in R started with <a href="https://cran.r-project.org/doc/Rnews/Rnews_2002-3.pdf">sweave</a>. These days we have a fantastic successor package called <a href="https://yihui.org/knitr/">knitr</a>, which I cover below.<a href="index.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>The "Mata" programming language was added in Stata 9: <a href="https://www.stata.com/stata9/" class="uri">https://www.stata.com/stata9/</a>. For a timeline of Stata versions, see <a href="https://www.stata.com/support/faqs/resources/history-of-stata/" class="uri">https://www.stata.com/support/faqs/resources/history-of-stata/</a>.<a href="index.html#fnref8" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>

<a href="rcrash.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
